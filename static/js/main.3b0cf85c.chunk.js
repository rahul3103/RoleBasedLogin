(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{203:function(e,n,t){e.exports=t(340)},340:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(17),c=t.n(o),l=t(24),i=t(119),u=t(22);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=function(e,n){return function(t){t(m(!0)),t(g(!1)),t(d(null)),f(e,n,function(e,n){t(m(!1)),n?t(d(n)):(t(g(!0)),t(E(e)))})}},m=function(e){return{type:"SET_LOGIN_PENDING",isLoginPending:e}},g=function(e){return{type:"SET_LOGIN_SUCCESS",isLoginSuccess:e}},d=function(e){return{type:"SET_LOGIN_ERROR",loginError:e}},E=function(e){return{type:"SET_USER",data:e}},p=function(){return localStorage.removeItem("name"),localStorage.removeItem("role"),function(e){e({type:"UNSET_USER"}),e(g(!1)),e(h("Welcome"))}},h=function(e){return{type:"UPDATE_GREET",greet:e}},f=function(e,n,t){fetch("https://demo2837922.mockable.io/user?id=".concat(e,"&&pass=").concat(n)).then(function(e){return e.json()}).then(function(e){localStorage.setItem("name",e.name),localStorage.setItem("role",e.role),t(e)}).catch(function(){return t({},"Invalid email and password")})},b={name:null,role:null},y=t(50),v={isLoginSuccess:!1,isLoginPending:!1,loginError:null},O=Object(l.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_USER":return{name:n.data.name,role:n.data.role};case"UNSET_USER":return b;default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_LOGIN_PENDING":return Object(y.a)({},e,{isLoginPending:n.isLoginPending});case"SET_LOGIN_SUCCESS":return Object(y.a)({},e,{isLoginSuccess:n.isLoginSuccess});case"SET_LOGIN_ERROR":return Object(y.a)({},e,{loginError:n.loginError});default:return e}},greet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Welcome",n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE_GREET":return n.greet;default:return e}}}),w=t(29),S=t(30),j=t(32),k=t(31),C=t(33),L=t(345),T=t(344),U=function(e){return function(n){var t=function(t){function r(){var e,n;Object(w.a)(this,r);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(n=Object(j.a)(this,(e=Object(k.a)(r)).call.apply(e,[this].concat(a)))).logOutUser=function(){var e=n.props,t=e.dispatch,r=e.history;t(p()),r.push("/")},n.welcome=function(e){(0,n.props.dispatch)(h(e))},n}return Object(C.a)(r,t),Object(S.a)(r,[{key:"render",value:function(){var t=this.props.user;return e.includes(t.role)?a.a.createElement(n,Object.assign({welcome:this.welcome,logOutUser:this.logOutUser},this.props)):a.a.createElement("h1",null,"Access Denied")}}]),r}(a.a.Component);return Object(u.b)(function(e){return{user:e.user,greet:e.greet}})(t)}},_=t(9),I=function(e){var n=e.welcome;return a.a.createElement(_.c,{item:!0,xs:12,md:9,lg:6,style:{margin:"0 auto",paddingTop:10}},a.a.createElement("h3",null,"Greet in different ways"),a.a.createElement(_.a,{style:{backgroundColor:"grey",marginRight:10},onClick:function(){return n("Wadakam")}},"Wadakam"),a.a.createElement(_.a,{style:{backgroundColor:"grey",marginRight:10},onClick:function(){return n("Welcome")}},"Welcome"),a.a.createElement(_.a,{style:{backgroundColor:"grey",marginRight:10},onClick:function(){return n("Namaskar")}},"Namaskar"))},R=function(e){var n=e.logOutUser,t=e.user,r=e.welcome,o=e.greet;return a.a.createElement(_.c,{container:!0,style:{marginTop:"10%",textAlign:"center"}},a.a.createElement(_.c,{item:!0,xs:12,md:9,lg:6,style:{margin:"0 auto"}},a.a.createElement("h2",null,t.role),a.a.createElement("h3",null,o," ",t.name),a.a.createElement(_.a,{style:{backgroundColor:"grey"},onClick:n},"Logout"),a.a.createElement(I,{welcome:r})))},N=function(e){var n=e.logOutUser,t=e.user,r=e.welcome,o=e.greet;return a.a.createElement(_.c,{container:!0,style:{marginTop:"10%",textAlign:"center"}},a.a.createElement(_.c,{item:!0,xs:12,md:9,lg:6,style:{margin:"0 auto"}},a.a.createElement("h2",null,t.role),a.a.createElement("h3",null,o," ",t.name),a.a.createElement(_.a,{style:{backgroundColor:"grey"},onClick:n},"Logout"),a.a.createElement(I,{welcome:r})))},P=function(e){var n=e.logOutUser,t=e.user,r=e.welcome,o=e.greet;return a.a.createElement(_.c,{container:!0,style:{marginTop:"10%",textAlign:"center"}},a.a.createElement(_.c,{item:!0,xs:12,md:9,lg:6,style:{margin:"0 auto"}},a.a.createElement("h2",null,t.role),a.a.createElement("h3",null,o," ",t.name),a.a.createElement(_.a,{style:{backgroundColor:"grey"},onClick:n},"Logout"),a.a.createElement(I,{welcome:r})))},x=t(48),G=t(343),A=function(e){function n(){var e,t;Object(w.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(j.a)(this,(e=Object(k.a)(n)).call.apply(e,[this].concat(o)))).state={username:"",password:""},t.handleChange=function(e){return function(n){t.setState(Object(x.a)({},e,n.target.value))}},t.submit=function(){var e=t.state,n=e.username,r=e.password;(0,t.props.dispatch)(s(n,r))},t.renderLoginComp=function(){return a.a.createElement("div",null,a.a.createElement(_.d,{label:"User Name",value:t.state.username,onChange:t.handleChange("username"),margin:"normal"}),a.a.createElement("br",null),a.a.createElement(_.d,{label:"Password",value:t.state.password,onChange:t.handleChange("password"),margin:"normal"}),a.a.createElement("br",null),a.a.createElement(_.a,{style:{backgroundColor:"grey"},onClick:t.submit},"Login"),a.a.createElement("br",null),a.a.createElement("div",{style:{color:"red"}},t.props.loginError))},t}return Object(C.a)(n,e),Object(S.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.props,n=e.history,t=e.user;e.isLoginSuccess&&t.role&&n.push("/".concat(t.role))}},{key:"render",value:function(){return a.a.createElement(_.c,{container:!0,style:{marginTop:"10%",textAlign:"center"}},a.a.createElement(_.c,{item:!0,xs:12,md:9,lg:6,style:{margin:"0 auto"}},this.props.isLoginPending?a.a.createElement(_.b,null):this.renderLoginComp()))}}]),n}(a.a.Component),W=Object(G.a)(Object(u.b)(function(e){return{isLoginPending:e.login.isLoginPending,isLoginSuccess:e.login.isLoginSuccess,loginError:e.login.loginError,user:e.user}})(A)),D=U(["agent"]),B=U(["manager"]),J=U(["admin"]),M=function(e){function n(){return Object(w.a)(this,n),Object(j.a)(this,Object(k.a)(n).apply(this,arguments))}return Object(C.a)(n,e),Object(S.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(function(){var e={name:localStorage.getItem("name"),role:localStorage.getItem("role")};return e.name&&e.role?function(n){n(E(e)),n(g(!0))}:function(e){e(p())}}())}},{key:"render",value:function(){return a.a.createElement(L.a,{basename:"/RoleBasedLogin"},a.a.createElement("div",null,a.a.createElement(T.a,{exact:!0,path:"/",component:W}),a.a.createElement(T.a,{path:"/agent",component:D(R)}),a.a.createElement(T.a,{path:"/manager",component:B(N)}),a.a.createElement(T.a,{path:"/admin",component:J(P)})))}}]),n}(a.a.Component),$=Object(u.b)()(M),q=Object(l.d)(O,{},Object(l.a)(i.a));c.a.render(a.a.createElement(u.a,{store:q},a.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[203,2,1]]]);
//# sourceMappingURL=main.3b0cf85c.chunk.js.map